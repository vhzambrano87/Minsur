@model IEnumerable<WebAppMS.Models.DTOAguas_operacionesM>

@{
    ViewBag.Title = "Aguas_operaciones";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- MAIN CONTENT -->
<div id="content">

    <div class="row">
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark">
                <i class="fa fa-table fa-fw "></i>
                Mantenedor
                <span>
                    >
                    Agua Operaciones
                </span>
            </h1>
        </div>

    </div>
    <a href="~/Aguas_operaciones/Create" class="btn btn-primary" role="button">Crear Registro</a>
    <!-- widget grid -->
    <section id="widget-grid" class="">

        <!-- row -->
        <div class="row">

            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">


                <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-1" data-widget-editbutton="false">
                    <header>
                        <span class="widget-icon"> <i class="fa fa-table"></i> </span>
                        <h2>Filtros</h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div id="divToolbar" style="width:100%;"></div>
                        <div id="divGrid" class="widget-body no-padding" style="width:100%; overflow-x: auto; border:1px solid #ccc;">
                        </div>

                        <table id="datatable_tabletools" class="table table-striped table-bordered">

                            <thead>
                                <tr>
                                    <th>Id. Agua Op.</th>
                                    <th>Fecha</th>
                                    <th>Turno</th>
                                    <th>Tecnico</th>
                                    <th>Nive TK 1</th>
                                    <th>Nivel TK 2</th>
                                    <th>Nivel TK Contraincendio</th>
                                    <th>Nivel TK Chancado</th>
                                    <th>Nivel PM Pad</th>
                                    <th>Nivel PM Pls</th>
                                    <th>Nivel TK Botadero</th>
                                    <th>Consumo Mina Cat 777</th>
                                    <th>Consumo Mina Riego Vias</th>
                                    <th>Consumo Mina Riego Caliza</th>
                                    <th>Consumo Geologia</th>
                                    <th>Consumo Exploracion</th>
                                    <th>Consumo Proy. Campamento</th>
                                    <th>Consumo Proy. Obras</th>
                                    <th>Consumo RRHH Timpure</th>
                                    <th>Consumo RRHH Pucamara</th>
                                    <th>Pluviometro Lixiviacion</th>
                                    <th>Pluviometro Planta ADR</th>
                                    <th>Pluviomento Pozos Agua</th>
                                    <th>Bombeo Chancado Niv. Inicial</th>
                                    <th>Bombeo Chancado Niv. Final</th>
                                    <th>Totalizador Pozo 1</th>
                                    <th>Totalizador Pozo 2</th>
                                    <th>Totalizador Pozo 3</th>
                                    <th>Totalizador Pozo 4</th>
                                    <th>Totalizador Pozo 5</th>
                                    <th>Totalizador Pozo 6</th>
                                    <th>Totalizador Ingreso TK 2</th>
                                    <th>Totalizador Make Up Planta</th>
                                    <th>Nivel Freatico Pozo 1</th>
                                    <th>Nivel Freatico Pozo 2</th>
                                    <th>Nivel Freatico Pozo 3</th>
                                    <th>Nivel Freatico Pozo 4</th>
                                    <th>Nivel Freatico Pozo 5</th>
                                    <th>Nivel Freatico Pozo 6</th>
                                    <th>Variador Velocidad Pozo 1</th>
                                    <th>Variador Velocidad Pozo 2</th>
                                    <th>Variador Velocidad Pozo 3</th>
                                    <th>Variador Velocidad Pozo 4</th>
                                    <th>Variador Velocidad Pozo 5</th>
                                    <th>Variador Velocidad Pozo 6</th>
                                    <th>Activo</th>
                                    <th>Usr. crea.</th>
                                    <th>Fecha crea.</th>
                                    <th>Usr. mod.</th>
                                    <th>Fecha mod.</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>

                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>@item.agua_op_id</td>
                                        <td>@item.fecha</td>
                                        <td>@item.turno</td>
                                        <td>@item.tecnico_id</td>
                                        <td>@item.nivel_tk_1</td>
                                        <td>@item.nivel_tk_2</td>
                                        <td>@item.nivel_tk_contraincendio</td>
                                        <td>@item.nivel_tk_chancado</td>
                                        <td>@item.nivel_pm_pad</td>
                                        <td>@item.nivel_pm_pls</td>
                                        <td>@item.nivel_tk_botadero</td>
                                        <td>@item.consumo_mina_cat_777</td>
                                        <td>@item.consumo_mina_riego_vias</td>
                                        <td>@item.consumo_mina_riego_caliza</td>
                                        <td>@item.consumo_geologia</td>
                                        <td>@item.consumo_exploracion</td>
                                        <td>@item.consumo_proy_campamento</td>
                                        <td>@item.consumo_proy_obras</td>
                                        <td>@item.consumo_rrhh_timpure</td>
                                        <td>@item.consumo_rrhh_pucamara</td>
                                        <td>@item.pluviometro_lixiviacion</td>
                                        <td>@item.pluviometro_planta_adr</td>
                                        <td>@item.pluviomento_pozos_agua</td>
                                        <td>@item.bombeo_chancado_niv_inicial</td>
                                        <td>@item.bombeo_chancado_niv_final</td>
                                        <td>@item.totalizador_pozo_1</td>
                                        <td>@item.totalizador_pozo_2</td>
                                        <td>@item.totalizador_pozo_3</td>
                                        <td>@item.totalizador_pozo_4</td>
                                        <td>@item.totalizador_pozo_5</td>
                                        <td>@item.totalizador_pozo_6</td>
                                        <td>@item.totalizador_ingreso_tk_2</td>
                                        <td>@item.totalizador_make_up_planta</td>
                                        <td>@item.nivel_freatico_pozo_1</td>
                                        <td>@item.nivel_freatico_pozo_2</td>
                                        <td>@item.nivel_freatico_pozo_3</td>
                                        <td>@item.nivel_freatico_pozo_4</td>
                                        <td>@item.nivel_freatico_pozo_5</td>
                                        <td>@item.nivel_freatico_pozo_6</td>
                                        <td>@item.variador_velocidad_pozo_1</td>
                                        <td>@item.variador_velocidad_pozo_2</td>
                                        <td>@item.variador_velocidad_pozo_3</td>
                                        <td>@item.variador_velocidad_pozo_4</td>
                                        <td>@item.variador_velocidad_pozo_5</td>
                                        <td>@item.variador_velocidad_pozo_6</td>
                                        <td>@Html.CheckBoxFor(model => item.activo)</td>
                                        <td>@item.usuario_crea</td>
                                        <td>@item.fecha_crea</td>
                                        <td>@item.usuario_mod</td>
                                        @if (item.fecha_mod.ToString().Contains("01/01/0001"))
                                        {
                                            <td></td>
                                        }
                                        else
                                        {
                                            <td>@item.fecha_mod</td>
                                        }
                                        <td><a href="~/Aguas_operaciones/Edit/@item.agua_op_id" class="btn btn-primary" role="button">Modificar</a></td>
                                    </tr>
                                }
                            </tbody>

                        </table>

                    </div>
                    <!-- end widget div -->

                </div>

            </article>
            <!-- WIDGET END -->

        </div>

        <!-- end row -->
        <!-- end row -->

    </section>
    <!-- end widget grid -->

</div>
@section pagespecific {
    <script type="text/javascript">
        debugger;
            // DO NOT REMOVE : GLOBAL FUNCTIONS!

            $(document).ready(function () {
                $('body').css('zoom', '80%');

                /* BASIC ;*/
                var responsiveHelper_dt_basic = undefined;
                var responsiveHelper_datatable_fixed_column = undefined;
                var responsiveHelper_datatable_col_reorder = undefined;
                var responsiveHelper_datatable_tabletools = undefined;

                var breakpointDefinition = {
                    tablet: 1024,
                    phone: 480
                };

                /* COLUMN FILTER  */
                var otable = $('#datatable_fixed_column').DataTable({
                    "sDom": "",
                    "autoWidth": false,
                    "preDrawCallback": function () {
                        // Initialize the responsive datatables helper once.
                        if (!responsiveHelper_datatable_fixed_column) {
                            responsiveHelper_datatable_fixed_column = new ResponsiveDatatablesHelper($('#datatable_fixed_column'), breakpointDefinition);
                        }
                    },
                    "rowCallback": function (nRow) {
                        responsiveHelper_datatable_fixed_column.createExpandIcon(nRow);
                    },
                    "drawCallback": function (oSettings) {
                        responsiveHelper_datatable_fixed_column.respond();
                    }

                });

                  //Apply the filter
                $("#datatable_fixed_column thead th input[type=text]").on('keyup change', function () {

                    otable
                        .column($(this).parent().index() + ':visible')
                        .search(this.value)
                        .draw();

                });

                /* TABLETOOLS */
                $('#datatable_tabletools').dataTable({

                    // Tabletools options:
                    //   https://datatables.net/extensions/tabletools/button_options
                    "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-6 hidden-xs'T>r>" +
                            "t" +
                            "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",
                    "oTableTools": {
                        "aButtons": [
                        "copy",
                        "csv",
                        "xls"
                        ],
                        "sSwfPath": "@System.Configuration.ConfigurationManager.AppSettings["servidorURL"]/Scripts/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                    },
                    "autoWidth": false,
                    "preDrawCallback": function () {
                        // Initialize the responsive datatables helper once.
                        if (!responsiveHelper_datatable_tabletools) {
                            responsiveHelper_datatable_tabletools = new ResponsiveDatatablesHelper($('#datatable_tabletools'), breakpointDefinition);
                        }
                    },
                    "rowCallback": function (nRow) {
                        responsiveHelper_datatable_tabletools.createExpandIcon(nRow);
                    },
                    "drawCallback": function (oSettings) {
                        responsiveHelper_datatable_tabletools.respond();
                    }
                });

                /* END TABLETOOLS */

                var $table = $("#datatable_tabletools");
                var $div = $("#divGrid");
                var $toolbar = $(".dt-toolbar");
                var $divToolbar = $("#divToolbar");
                $($div).append($($table).show());
                $($divToolbar).append($($toolbar));

                var inputs = document.getElementsByTagName('input');
                for (var i = 0; i < inputs.length; i++) {
                    if (inputs[i].getAttribute('type') == 'search') {

                        inputs[i].placeholder = "Buscar...";
                    }
                }

            })

</script>


}